import{h as B,i as L,a as $,_ as j,e as I,d as A,g as F}from"./vendor-@babel-VngMWY5V.js";import{r as t}from"./react-vendor-BzgrQwqc.js";import{s as K,l as T,o as V,L as C,t as X}from"./vendor-rc-util-CqoDg0dq.js";import{i as Y}from"./vendor-resize-observer-polyfill-CDE7jhPe.js";var b=t.createContext(null);function q(e){var o=e.children,r=e.onBatchResize,i=t.useRef(0),n=t.useRef([]),a=t.useContext(b),l=t.useCallback(function(d,u,f){i.current+=1;var h=i.current;n.current.push({size:d,element:u,data:f}),Promise.resolve().then(function(){h===i.current&&(r==null||r(n.current),n.current=[])}),a==null||a(d,u,f)},[r,a]);return t.createElement(b.Provider,{value:l},o)}var c=new Map;function G(e){e.forEach(function(o){var r,i=o.target;(r=c.get(i))===null||r===void 0||r.forEach(function(n){return n(i)})})}var M=new Y(G);function J(e,o){c.has(e)||(c.set(e,new Set),M.observe(e)),c.get(e).add(o)}function Q(e,o){c.has(e)&&(c.get(e).delete(o),c.get(e).size||(M.unobserve(e),c.delete(e)))}var U=function(e){B(r,e);var o=L(r);function r(){return $(this,r),o.apply(this,arguments)}return j(r,[{key:"render",value:function(){return this.props.children}}]),r}(t.Component);function Z(e,o){var r=e.children,i=e.disabled,n=t.useRef(null),a=t.useRef(null),l=t.useContext(b),d=typeof r=="function",u=d?r(n):r,f=t.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),h=!d&&t.isValidElement(u)&&K(u),O=h?T(u):null,D=V(O,n),z=function(){var v;return C(n.current)||(n.current&&A(n.current)==="object"?C((v=n.current)===null||v===void 0?void 0:v.nativeElement):null)||C(a.current)};t.useImperativeHandle(o,function(){return z()});var E=t.useRef(e);E.current=e;var _=t.useCallback(function(s){var v=E.current,w=v.onResize,N=v.data,x=s.getBoundingClientRect(),p=x.width,m=x.height,R=s.offsetWidth,g=s.offsetHeight,y=Math.floor(p),W=Math.floor(m);if(f.current.width!==y||f.current.height!==W||f.current.offsetWidth!==R||f.current.offsetHeight!==g){var k={width:y,height:W,offsetWidth:R,offsetHeight:g};f.current=k;var P=R===Math.round(p)?p:R,S=g===Math.round(m)?m:g,H=I(I({},k),{},{offsetWidth:P,offsetHeight:S});l==null||l(H,s,N),w&&Promise.resolve().then(function(){w(H,s)})}},[]);return t.useEffect(function(){var s=z();return s&&!i&&J(s,_),function(){return Q(s,_)}},[n.current,i]),t.createElement(U,{ref:a},h?t.cloneElement(u,{ref:D}):u)}var ee=t.forwardRef(Z),re="rc-observer-key";function te(e,o){var r=e.children,i=typeof r=="function"?[r]:X(r);return i.map(function(n,a){var l=(n==null?void 0:n.key)||"".concat(re,"-").concat(a);return t.createElement(ee,F({},e,{key:l,ref:a===0?o:void 0}),n)})}var ne=t.forwardRef(te);ne.Collection=q;export{ne as R};
