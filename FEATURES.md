# IPv6 WireGuard Manager - 功能详细说明

## 📋 目录

- [仪表板](#仪表板)
- [WireGuard管理](#wireguard管理)
- [网络管理](#网络管理)
- [用户管理](#用户管理)
- [系统设置](#系统设置)
- [域名与SSL配置](#域名与ssl配置)
- [系统管理](#系统管理)
- [监控与统计](#监控与统计)

## 📊 仪表板

### 功能概述
仪表板提供系统的整体状态概览，包括关键指标、快速操作和最近活动。

### 主要组件
- **系统状态卡片**: 显示在线客户端数、运行服务器数、BGP宣告数
- **服务器列表**: 显示所有WireGuard服务器的简要信息
- **客户端列表**: 显示最近连接的客户端
- **BGP宣告列表**: 显示当前的BGP路由宣告
- **快速操作**: 一键访问主要管理功能

### 数据更新
- 实时数据刷新（每30秒）
- 手动刷新按钮
- 自动错误重试机制

## 🖥️ WireGuard管理

### 服务器管理

#### 创建服务器
1. 点击"添加服务器"按钮
2. 填写服务器信息：
   - **名称**: 服务器显示名称
   - **描述**: 服务器用途描述
   - **监听端口**: WireGuard监听端口（默认51820）
   - **IPv4地址**: 服务器IPv4地址
   - **IPv6地址**: 服务器IPv6地址
   - **DNS服务器**: 客户端使用的DNS
   - **MTU**: 网络最大传输单元
   - **Keepalive**: 连接保活间隔

#### 服务器操作
- **启动/停止**: 控制服务器运行状态
- **编辑配置**: 修改服务器参数
- **复制公钥**: 快速复制服务器公钥
- **删除服务器**: 移除服务器配置

#### 配置生成
- 自动生成WireGuard配置文件
- 支持IPv4和IPv6双栈配置
- 自动配置路由和DNS

### 客户端管理

#### 添加客户端
1. 选择关联的服务器
2. 填写客户端信息：
   - **名称**: 客户端标识名称
   - **描述**: 客户端用途说明
   - **IPv4地址**: 分配给客户端的IPv4地址
   - **IPv6地址**: 分配给客户端的IPv6地址
   - **允许的IP**: 客户端可以访问的网络范围

#### 客户端操作
- **编辑配置**: 修改客户端参数
- **生成QR码**: 生成配置二维码
- **下载配置**: 下载.conf配置文件
- **复制公钥**: 复制客户端公钥
- **删除客户端**: 移除客户端配置

#### 配置分享
- **QR码生成**: 自动生成配置二维码
- **配置文件下载**: 支持.conf文件下载
- **公钥复制**: 一键复制公钥到剪贴板

## 🌐 网络管理

### BGP宣告管理

#### 添加BGP宣告
1. 点击"添加宣告"按钮
2. 填写宣告信息：
   - **前缀**: 要宣告的IP前缀（如：192.168.1.0/24）
   - **ASN**: 自治系统号
   - **下一跳**: BGP下一跳地址
   - **描述**: 宣告用途说明

#### BGP操作
- **启用/禁用**: 控制宣告状态
- **编辑配置**: 修改宣告参数
- **删除宣告**: 移除BGP宣告

#### 支持的协议
- IPv4 BGP宣告
- IPv6 BGP宣告
- 多路径BGP支持

### 网络接口监控
- 实时接口状态显示
- 流量统计信息
- 接口配置管理

### 防火墙规则
- 规则列表管理
- 规则优先级设置
- 规则启用/禁用

## 🔧 系统管理

### 功能概述
系统管理功能提供完整的系统生命周期管理，包括卸载、重新安装、备份恢复等高级操作。

### 系统操作

#### 完全卸载系统
- **功能描述**: 完全移除IPv6 WireGuard Manager系统
- **操作步骤**:
  1. 进入系统设置 → 系统管理
  2. 点击"完全卸载系统"按钮
  3. 输入"UNINSTALL"确认操作
  4. 系统自动执行卸载流程
- **卸载内容**:
  - 停止所有相关服务
  - 备份重要配置文件
  - 删除应用文件
  - 清理数据库
  - 移除systemd服务配置
- **安全机制**:
  - 需要管理员权限
  - 双重确认机制
  - 操作日志记录

#### 重新安装系统
- **功能描述**: 重新安装最新版本的IPv6 WireGuard Manager
- **操作步骤**:
  1. 进入系统设置 → 系统管理
  2. 点击"重新安装系统"按钮
  3. 输入"REINSTALL"确认操作
  4. 系统自动执行重新安装流程
- **安装内容**:
  - 创建当前配置备份
  - 下载最新版本
  - 重新安装依赖
  - 恢复配置
  - 重启服务
- **安全机制**:
  - 自动备份当前配置
  - 版本验证
  - 回滚机制

### 系统信息监控

#### 实时状态监控
- **版本信息**: 显示当前系统版本和构建信息
- **安装时间**: 系统首次安装时间记录
- **服务状态**: 实时监控各服务运行状态
  - 后端服务状态
  - 数据库连接状态
  - Nginx服务状态
- **运行时间**: 系统运行时长统计

#### 状态指示器
- **绿色**: 服务正常运行
- **红色**: 服务异常或停止
- **黄色**: 服务状态未知

### 备份与恢复

#### 自动备份
- **触发时机**: 重要操作前自动创建备份
- **备份内容**: 配置文件、用户数据、系统设置
- **存储位置**: `/opt/ipv6-wireguard-manager/backups/`
- **备份格式**: 压缩tar.gz文件

#### 手动备份
- **创建备份**: 手动触发系统备份
- **备份管理**: 查看、下载、删除备份文件
- **备份验证**: 验证备份文件完整性

#### 恢复功能
- **备份选择**: 从备份列表选择恢复点
- **恢复验证**: 验证恢复文件完整性
- **恢复执行**: 自动恢复系统配置

### 操作日志

#### 日志记录
- **操作记录**: 记录所有系统管理操作
- **时间戳**: 精确的操作时间记录
- **用户信息**: 操作执行者信息
- **操作结果**: 成功/失败状态记录

#### 日志查看
- **实时日志**: 实时显示操作日志
- **历史日志**: 查看历史操作记录
- **日志过滤**: 按时间、操作类型过滤
- **日志导出**: 导出日志文件

### 安全特性

#### 权限控制
- **管理员权限**: 只有管理员可以执行系统操作
- **角色验证**: 验证用户角色和权限
- **会话管理**: 安全的用户会话管理

#### 确认机制
- **双重确认**: 需要输入特定文本确认操作
- **操作警告**: 明确的操作风险提示
- **取消机制**: 操作过程中可以取消

#### 审计跟踪
- **操作审计**: 完整的操作审计日志
- **安全日志**: 安全相关事件记录
- **合规性**: 满足安全合规要求

### API接口

#### 系统信息API
- `GET /api/v1/system/info`: 获取系统信息
- `GET /api/v1/system/logs`: 获取系统日志
- `GET /api/v1/system/backups`: 获取备份列表

#### 系统操作API
- `POST /api/v1/system/action`: 执行系统操作
- `POST /api/v1/system/backup`: 创建系统备份
- `POST /api/v1/system/restore`: 恢复系统备份

#### 状态检查API
- `GET /api/v1/status/status`: 获取系统状态
- `GET /api/v1/status/health`: 健康检查

### 错误处理

#### 异常处理
- **操作失败**: 自动回滚和错误恢复
- **网络异常**: 网络连接异常处理
- **权限错误**: 权限不足错误处理
- **系统错误**: 系统级错误处理

#### 用户反馈
- **进度显示**: 实时操作进度显示
- **状态更新**: 操作状态实时更新
- **错误提示**: 清晰的错误信息提示
- **成功确认**: 操作成功确认信息

## 👥 用户管理

### 用户角色系统

#### 管理员（Admin）
- 完全系统访问权限
- 用户管理权限
- 系统配置权限
- 所有功能访问权限

#### 操作员（Operator）
- WireGuard管理权限
- 网络管理权限
- 监控查看权限
- 无用户管理权限

#### 查看者（Viewer）
- 只读访问权限
- 状态查看权限
- 无修改权限

### 用户操作

#### 添加用户
1. 点击"添加用户"按钮
2. 填写用户信息：
   - **用户名**: 登录用户名
   - **邮箱**: 联系邮箱
   - **密码**: 初始密码
   - **角色**: 选择用户角色
   - **状态**: 激活/禁用状态

#### 用户管理
- **编辑用户**: 修改用户信息
- **重置密码**: 重置用户密码
- **激活/禁用**: 控制用户状态
- **删除用户**: 移除用户账户

#### 登录统计
- 登录次数统计
- 最后登录时间
- 登录IP记录
- 会话管理

## ⚙️ 系统设置

### 个人信息管理

#### 修改个人信息
- **用户名**: 修改显示用户名
- **邮箱**: 更新联系邮箱
- **头像**: 上传用户头像（如支持）

#### 密码管理
- **修改密码**: 更改登录密码
- **密码强度**: 密码复杂度要求
- **密码历史**: 防止重复使用旧密码

### 系统配置

#### 网络设置
- **默认MTU**: 网络最大传输单元
- **默认Keepalive**: 连接保活间隔
- **默认DNS**: 默认DNS服务器
- **自动启动**: 服务自动启动设置

#### 日志设置
- **日志级别**: DEBUG/INFO/WARN/ERROR
- **日志轮转**: 日志文件轮转策略
- **日志保留**: 日志保留天数

#### 备份设置
- **备份启用**: 是否启用自动备份
- **备份间隔**: 备份频率设置
- **备份位置**: 备份文件存储位置

### 安全设置

#### 登录安全
- **强制HTTPS**: 强制使用HTTPS访问
- **会话超时**: 会话超时时间设置
- **登录失败锁定**: 登录失败次数限制
- **IP白名单**: 允许访问的IP地址

#### API安全
- **API访问限制**: API调用频率限制
- **CORS保护**: 跨域请求保护
- **API密钥管理**: API密钥生成和管理

## 🌍 域名与SSL配置

### 域名绑定

#### 自定义域名配置
1. 进入系统设置 → 域名与SSL
2. 输入自定义域名（如：vpn.example.com）
3. 点击"测试域名连接"验证解析
4. 保存配置

#### 域名验证
- 自动DNS解析检查
- 域名格式验证
- 连接测试功能

### SSL证书管理

#### Let's Encrypt配置（推荐）
1. **启用SSL**: 开启SSL功能
2. **选择提供商**: 选择Let's Encrypt
3. **DNS配置**: 配置DNS提供商
   - Cloudflare
   - 阿里云DNS
   - 腾讯云DNS
   - DNSPod
4. **API密钥**: 输入DNS API密钥
5. **自动续期**: 启用证书自动续期
6. **生成证书**: 点击生成SSL证书

#### 自定义证书配置
1. **启用SSL**: 开启SSL功能
2. **选择提供商**: 选择自定义证书
3. **证书配置**: 选择配置方式
   - **文件路径**: 输入证书文件路径
   - **证书内容**: 直接粘贴证书内容
4. **私钥配置**: 配置私钥
   - **文件路径**: 输入私钥文件路径
   - **私钥内容**: 直接粘贴私钥内容

#### Cloudflare SSL配置
1. **启用SSL**: 开启SSL功能
2. **选择提供商**: 选择Cloudflare
3. **API配置**: 输入Cloudflare API密钥
4. **保存配置**: 保存SSL设置

### SSL证书类型对比

| 类型 | 费用 | 有效期 | 自动续期 | 配置复杂度 |
|------|------|--------|----------|------------|
| Let's Encrypt | 免费 | 90天 | 支持 | 中等 |
| 自定义证书 | 付费 | 1-3年 | 手动 | 简单 |
| Cloudflare | 免费/付费 | 长期 | 自动 | 简单 |

### DNS提供商配置

#### Cloudflare
- 全球CDN加速
- 免费SSL证书
- 强大的API支持
- 配置示例：
  ```
  API Key: your-cloudflare-api-key
  Email: your-email@example.com
  ```

#### 阿里云DNS
- 国内访问速度快
- 稳定的解析服务
- 支持IPv6
- 配置示例：
  ```
  Access Key ID: your-access-key-id
  Access Key Secret: your-access-key-secret
  ```

#### 腾讯云DNS
- 高可用性
- 智能解析
- 安全防护
- 配置示例：
  ```
  Secret ID: your-secret-id
  Secret Key: your-secret-key
  ```

## 📊 监控与统计

### 实时监控

#### 系统资源监控
- **CPU使用率**: 实时CPU使用情况
- **内存使用率**: 内存占用统计
- **磁盘使用率**: 存储空间使用情况
- **网络流量**: 实时网络流量统计

#### WireGuard监控
- **服务器状态**: 服务器运行状态
- **客户端连接**: 在线客户端数量
- **流量统计**: 各客户端流量使用
- **连接质量**: 连接延迟和丢包率

#### 网络监控
- **BGP状态**: BGP会话状态
- **路由表**: 当前路由信息
- **接口状态**: 网络接口状态
- **防火墙状态**: 防火墙规则状态

### 统计报告

#### 用户统计
- **登录统计**: 用户登录次数和时间分布
- **活跃用户**: 活跃用户数量统计
- **用户行为**: 用户操作行为分析

#### 流量统计
- **总流量**: 系统总流量统计
- **客户端流量**: 各客户端流量排行
- **时间分布**: 流量使用时间分布
- **协议分析**: 不同协议流量占比

#### 系统性能
- **响应时间**: 系统响应时间统计
- **错误率**: 系统错误率统计
- **可用性**: 系统可用性统计
- **性能趋势**: 性能变化趋势

### 告警系统

#### 告警类型
- **系统告警**: CPU、内存、磁盘告警
- **网络告警**: 网络连接异常告警
- **安全告警**: 异常登录、攻击告警
- **服务告警**: 服务异常告警

#### 告警配置
- **告警阈值**: 自定义告警触发条件
- **告警方式**: 邮件、短信、Webhook
- **告警频率**: 告警发送频率控制
- **告警恢复**: 自动告警恢复通知

## 🔧 高级功能

### API接口

#### RESTful API
- 完整的REST API支持
- API文档自动生成
- API版本管理
- 请求限流保护

#### WebSocket支持
- 实时数据推送
- 双向通信支持
- 连接状态管理
- 消息队列支持

### 插件系统

#### 扩展插件
- 自定义功能插件
- 第三方集成插件
- 主题和样式插件
- 数据源插件

#### 插件管理
- 插件安装和卸载
- 插件配置管理
- 插件版本控制
- 插件依赖管理

### 多语言支持

#### 国际化
- 多语言界面支持
- 动态语言切换
- 本地化配置
- 时区支持

#### 支持语言
- 中文（简体）
- 中文（繁体）
- English
- 日语
- 韩语

## 🚀 性能优化

### 前端优化
- 代码分割和懒加载
- 静态资源缓存
- 图片压缩和优化
- CDN加速支持

### 后端优化
- 数据库查询优化
- 缓存策略优化
- 异步处理支持
- 负载均衡支持

### 网络优化
- HTTP/2支持
- Gzip压缩
- 静态资源压缩
- 连接池优化

---

## 📞 技术支持

如果您在使用过程中遇到问题，可以通过以下方式获取帮助：

- **GitHub Issues**: [提交问题](https://github.com/ipzh/ipv6-wireguard-manager/issues)
- **文档Wiki**: 查看详细技术文档
- **社区论坛**: 参与用户讨论
- **邮件支持**: 发送邮件到技术支持邮箱

---

*最后更新: 2024年10月*
