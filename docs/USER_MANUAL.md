# IPv6 WireGuard Manager - 用户手册

## 📋 目录

- [概述](#概述)
- [快速开始](#快速开始)
- [用户认证](#用户认证)
- [仪表板](#仪表板)
- [WireGuard管理](#wireguard管理)
- [BGP管理](#bgp管理)
- [IPv6管理](#ipv6管理)
- [监控管理](#监控管理)
- [日志管理](#日志管理)
- [用户管理](#用户管理)
- [系统管理](#系统管理)
- [网络管理](#网络管理)
- [故障排除](#故障排除)
- [常见问题](#常见问题)

## 概述

IPv6 WireGuard Manager 是一个现代化的Web管理界面，用于管理IPv4/IPv6双栈网络、WireGuard VPN、BGP路由等网络服务。

### 主要功能

- 🚀 **现代化界面**: 响应式设计，支持桌面和移动设备
- 🔐 **安全认证**: JWT令牌认证，角色权限控制
- 📊 **实时监控**: 系统状态、网络流量、服务监控
- 🌐 **双栈支持**: 完整的IPv4/IPv6双栈网络管理
- 🔧 **VPN管理**: WireGuard服务器和客户端管理
- 🛣️ **路由管理**: BGP会话和路由宣告管理
- 📈 **监控告警**: 实时监控和告警通知
- 📝 **日志管理**: 完整的日志查看和分析

## 快速开始

### 1. 访问系统

打开浏览器，访问系统地址：

```
http://your-server-ip
```

### 2. 首次登录

使用默认管理员账户登录：

- **用户名**: `admin`
- **密码**: `admin123`

> ⚠️ **安全提示**: 首次登录后请立即修改默认密码！

### 3. 修改密码

1. 点击右上角用户头像
2. 选择"个人设置"
3. 在"安全设置"中修改密码
4. 点击"保存"

## 用户认证

### 登录系统

#### 登录页面

访问系统首页，您将看到登录页面：

```
┌─────────────────────────────────────┐
│  IPv6 WireGuard Manager            │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 用户名: [admin        ]    │   │
│  │ 密码:   [••••••••••••••]   │   │
│  │                             │   │
│  │        [ 登录 ]             │   │
│  └─────────────────────────────┘   │
└─────────────────────────────────────┘
```

#### 登录步骤

1. 输入用户名和密码
2. 点击"登录"按钮
3. 系统验证成功后自动跳转到仪表板

#### 登录失败处理

如果登录失败，可能的原因：

- ❌ 用户名或密码错误
- ❌ 账户被锁定
- ❌ 网络连接问题
- ❌ 系统服务异常

**解决方案**:

1. 检查用户名和密码是否正确
2. 联系管理员解锁账户
3. 检查网络连接
4. 查看系统状态

### 会话管理

#### 会话超时

- 默认会话超时时间：30分钟
- 超时后需要重新登录
- 可以通过"记住我"选项延长会话时间

#### 登出系统

1. 点击右上角用户头像
2. 选择"登出"
3. 确认登出操作

## 仪表板

### 仪表板概览

仪表板是系统的主页面，提供系统状态的全面概览：

```
┌─────────────────────────────────────────────────────────────┐
│  IPv6 WireGuard Manager                    [用户] [设置] [登出] │
├─────────────────────────────────────────────────────────────┤
│  📊 系统状态概览                                            │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│  │ CPU: 45%│ │内存: 50%│ │磁盘: 60%│ │网络: 正常│           │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘           │
│                                                             │
│  🌐 WireGuard 状态                                          │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ 服务器: 2个运行中  │  客户端: 15个活跃  │  流量: 1.2GB/天  │ │
│  └─────────────────────────────────────────────────────────┘ │
│                                                             │
│  🛣️ BGP 状态                                                │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ 会话: 3个建立  │  路由: 150条  │  宣告: 25条  │  状态: 正常  │ │
│  └─────────────────────────────────────────────────────────┘ │
│                                                             │
│  📈 最近活动                                                │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ 14:30 - 用户 admin 登录系统                              │ │
│  │ 14:25 - WireGuard 服务器 wg0 启动                       │ │
│  │ 14:20 - BGP 会话 session1 建立                          │ │
│  │ 14:15 - 新客户端 client5 创建                           │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 系统状态卡片

#### CPU使用率

- **显示内容**: 当前CPU使用率百分比
- **颜色指示**: 
  - 🟢 绿色: < 70% (正常)
  - 🟡 黄色: 70-85% (警告)
  - 🔴 红色: > 85% (危险)

#### 内存使用率

- **显示内容**: 当前内存使用率百分比
- **详细信息**: 总内存、已用内存、可用内存

#### 磁盘使用率

- **显示内容**: 当前磁盘使用率百分比
- **详细信息**: 总容量、已用空间、可用空间

#### 网络状态

- **显示内容**: 网络连接状态
- **详细信息**: 入站流量、出站流量、连接数

### 服务状态概览

#### WireGuard状态

- **服务器数量**: 运行中的WireGuard服务器数量
- **客户端数量**: 活跃的客户端数量
- **流量统计**: 日流量、月流量统计

#### BGP状态

- **会话状态**: 建立的BGP会话数量
- **路由数量**: 接收和宣告的路由数量
- **连接状态**: 整体BGP连接状态

### 最近活动

显示系统最近的活动记录：

- 用户登录/登出
- 服务启动/停止
- 配置修改
- 错误事件

## WireGuard管理

### 服务器管理

#### 服务器列表

访问"WireGuard" → "服务器管理"查看服务器列表：

```
┌─────────────────────────────────────────────────────────────┐
│  WireGuard 服务器管理                    [+ 添加服务器]      │
├─────────────────────────────────────────────────────────────┤
│ 名称    │ 接口  │ 端口   │ IPv4地址      │ IPv6地址        │ 状态   │ 操作 │
├─────────────────────────────────────────────────────────────┤
│ wg0     │ wg0   │ 51820  │ 10.0.0.1/24  │ 2001:db8::1/64  │ 运行中 │ [管理]│
│ wg1     │ wg1   │ 51821  │ 10.0.1.1/24  │ 2001:db8:1::1/64│ 已停止 │ [管理]│
└─────────────────────────────────────────────────────────────┘
```

#### 添加服务器

1. 点击"+ 添加服务器"按钮
2. 填写服务器信息：

```
┌─────────────────────────────────────┐
│  添加 WireGuard 服务器              │
├─────────────────────────────────────┤
│ 服务器名称: [wg2              ]    │
│ 接口名称:   [wg2              ]    │
│ 监听端口:   [51822            ]    │
│ IPv4地址:   [10.0.2.1/24      ]    │
│ IPv6地址:   [2001:db8:2::1/64 ]    │
│ DNS服务器:  [8.8.8.8,8.8.4.4 ]    │
│ MTU:        [1420            ]    │
│ 启用:       [✓]                    │
│                                     │
│        [ 取消 ]    [ 创建 ]         │
└─────────────────────────────────────┘
```

3. 点击"创建"按钮

#### 服务器操作

每个服务器支持以下操作：

- **启动**: 启动WireGuard服务器
- **停止**: 停止WireGuard服务器
- **重启**: 重启WireGuard服务器
- **编辑**: 修改服务器配置
- **删除**: 删除服务器
- **导出**: 导出服务器配置
- **查看**: 查看服务器详情

#### 服务器详情

点击"查看"按钮查看服务器详细信息：

```
┌─────────────────────────────────────────────────────────────┐
│  WireGuard 服务器详情 - wg0                                 │
├─────────────────────────────────────────────────────────────┤
│ 基本信息:                                                    │
│   名称: wg0                                                  │
│   接口: wg0                                                  │
│   监听端口: 51820                                            │
│   状态: 运行中                                               │
│   创建时间: 2024-01-01 10:00:00                             │
│                                                             │
│ 网络配置:                                                    │
│   IPv4地址: 10.0.0.1/24                                     │
│   IPv6地址: 2001:db8::1/64                                  │
│   DNS服务器: 8.8.8.8, 8.8.4.4                              │
│   MTU: 1420                                                 │
│                                                             │
│ 密钥信息:                                                    │
│   公钥: [显示/隐藏] [复制]                                   │
│   私钥: [显示/隐藏] [复制]                                   │
│                                                             │
│ 客户端统计:                                                  │
│   总客户端: 5个                                              │
│   活跃客户端: 4个                                            │
│   总流量: 1.2GB (入) / 2.1GB (出)                           │
└─────────────────────────────────────────────────────────────┘
```

### 客户端管理

#### 客户端列表

访问"WireGuard" → "客户端管理"查看客户端列表：

```
┌─────────────────────────────────────────────────────────────┐
│  WireGuard 客户端管理                    [+ 添加客户端]      │
├─────────────────────────────────────────────────────────────┤
│ 名称     │ 服务器 │ IPv4地址      │ IPv6地址        │ 状态   │ 操作 │
├─────────────────────────────────────────────────────────────┤
│ client1  │ wg0    │ 10.0.0.2/32  │ 2001:db8::2/128 │ 活跃   │ [管理]│
│ client2  │ wg0    │ 10.0.0.3/32  │ 2001:db8::3/128 │ 活跃   │ [管理]│
│ client3  │ wg0    │ 10.0.0.4/32  │ 2001:db8::4/128 │ 离线   │ [管理]│
└─────────────────────────────────────────────────────────────┘
```

#### 添加客户端

1. 点击"+ 添加客户端"按钮
2. 选择服务器
3. 填写客户端信息：

```
┌─────────────────────────────────────┐
│  添加 WireGuard 客户端              │
├─────────────────────────────────────┤
│ 客户端名称: [client4           ]    │
│ 所属服务器: [wg0 ▼             ]    │
│ IPv4地址:   [10.0.0.5/32       ]    │
│ IPv6地址:   [2001:db8::5/128   ]    │
│ DNS服务器:  [8.8.8.8           ]    │
│ 允许的IP:   [0.0.0.0/0,::/0    ]    │
│ 启用:       [✓]                    │
│                                     │
│        [ 取消 ]    [ 创建 ]         │
└─────────────────────────────────────┘
```

4. 点击"创建"按钮

#### 客户端操作

每个客户端支持以下操作：

- **编辑**: 修改客户端配置
- **删除**: 删除客户端
- **导出**: 导出客户端配置
- **二维码**: 生成配置二维码
- **查看**: 查看客户端详情

#### 客户端配置导出

点击"导出"按钮下载客户端配置文件：

```
[Interface]
PrivateKey = client_private_key_here
Address = 10.0.0.5/32, 2001:db8::5/128
DNS = 8.8.8.8

[Peer]
PublicKey = server_public_key_here
Endpoint = your-server.com:51820
AllowedIPs = 0.0.0.0/0, ::/0
PersistentKeepalive = 25
```

#### 二维码生成

点击"二维码"按钮生成配置二维码，用户可以使用WireGuard客户端扫描二维码快速导入配置。

## BGP管理

### BGP会话管理

#### 会话列表

访问"BGP" → "会话管理"查看BGP会话列表：

```
┌─────────────────────────────────────────────────────────────┐
│  BGP 会话管理                        [+ 添加会话]           │
├─────────────────────────────────────────────────────────────┤
│ 名称     │ 邻居地址    │ 远程AS │ 本地AS │ 状态     │ 操作   │
├─────────────────────────────────────────────────────────────┤
│ session1 │ 192.168.1.1│ 65001  │ 65000  │ 已建立   │ [管理] │
│ session2 │ 192.168.1.2│ 65002  │ 65000  │ 空闲     │ [管理] │
│ session3 │ 192.168.1.3│ 65003  │ 65000  │ 已建立   │ [管理] │
└─────────────────────────────────────────────────────────────┘
```

#### 添加BGP会话

1. 点击"+ 添加会话"按钮
2. 填写会话信息：

```
┌─────────────────────────────────────┐
│  添加 BGP 会话                      │
├─────────────────────────────────────┤
│ 会话名称: [session4            ]    │
│ 邻居地址: [192.168.1.4         ]    │
│ 远程AS:   [65004               ]    │
│ 本地AS:   [65000               ]    │
│ MD5密码:  [bgp_password        ]    │
│ 启用:     [✓]                      │
│                                     │
│        [ 取消 ]    [ 创建 ]         │
└─────────────────────────────────────┘
```

3. 点击"创建"按钮

#### 会话操作

每个会话支持以下操作：

- **启动**: 启动BGP会话
- **停止**: 停止BGP会话
- **重启**: 重启BGP会话
- **编辑**: 修改会话配置
- **删除**: 删除会话
- **查看**: 查看会话详情

#### 会话详情

点击"查看"按钮查看会话详细信息：

```
┌─────────────────────────────────────────────────────────────┐
│  BGP 会话详情 - session1                                    │
├─────────────────────────────────────────────────────────────┤
│ 基本信息:                                                    │
│   名称: session1                                             │
│   邻居地址: 192.168.1.1                                      │
│   远程AS: 65001                                              │
│   本地AS: 65000                                              │
│   状态: 已建立                                               │
│   运行时间: 2天 5小时 30分钟                                 │
│                                                             │
│ 统计信息:                                                    │
│   接收路由: 150条                                            │
│   宣告路由: 25条                                             │
│   最后更新: 2024-01-01 14:30:00                             │
│   最后错误: 无                                               │
│                                                             │
│ 连接信息:                                                    │
│   连接状态: 已建立                                           │
│   保持时间: 25秒                                             │
│   连接重试: 0次                                              │
│   最后握手: 2024-01-01 14:30:00                             │
└─────────────────────────────────────────────────────────────┘
```

### BGP宣告管理

#### 宣告列表

访问"BGP" → "宣告管理"查看BGP宣告列表：

```
┌─────────────────────────────────────────────────────────────┐
│  BGP 宣告管理                        [+ 添加宣告]           │
├─────────────────────────────────────────────────────────────┤
│ 前缀           │ 下一跳        │ AS路径  │ 社区    │ 状态   │ 操作 │
├─────────────────────────────────────────────────────────────┤
│ 192.168.1.0/24 │ 192.168.1.1   │ 65000   │ 65000:100│ 活跃  │ [管理]│
│ 192.168.2.0/24 │ 192.168.2.1   │ 65000   │ 65000:200│ 活跃  │ [管理]│
│ 2001:db8::/32  │ 2001:db8::1   │ 65000   │ 65000:300│ 活跃  │ [管理]│
└─────────────────────────────────────────────────────────────┘
```

#### 添加BGP宣告

1. 点击"+ 添加宣告"按钮
2. 填写宣告信息：

```
┌─────────────────────────────────────┐
│  添加 BGP 宣告                      │
├─────────────────────────────────────┤
│ 网络前缀: [192.168.3.0/24      ]    │
│ 下一跳:   [192.168.3.1         ]    │
│ AS路径:   [65000                ]    │
│ 社区:     [65000:400            ]    │
│ 启用:     [✓]                      │
│                                     │
│        [ 取消 ]    [ 创建 ]         │
└─────────────────────────────────────┘
```

3. 点击"创建"按钮

## IPv6管理

### IPv6前缀池管理

#### 前缀池列表

访问"IPv6" → "前缀池管理"查看IPv6前缀池列表：

```
┌─────────────────────────────────────────────────────────────┐
│  IPv6 前缀池管理                    [+ 添加前缀池]          │
├─────────────────────────────────────────────────────────────┤
│ 名称  │ 前缀            │ 长度 │ 总数   │ 已分配 │ 可用   │ 状态 │ 操作 │
├─────────────────────────────────────────────────────────────┤
│ pool1 │ 2001:db8::/48   │ 64   │ 65536  │ 100    │ 65436  │ 活跃 │ [管理]│
│ pool2 │ 2001:db8:1::/48 │ 64   │ 65536  │ 50     │ 65486  │ 活跃 │ [管理]│
└─────────────────────────────────────────────────────────────┘
```

#### 添加前缀池

1. 点击"+ 添加前缀池"按钮
2. 填写前缀池信息：

```
┌─────────────────────────────────────┐
│  添加 IPv6 前缀池                   │
├─────────────────────────────────────┤
│ 池名称: [pool3                 ]    │
│ 前缀:   [2001:db8:2::/48       ]    │
│ 长度:   [64                    ]    │
│ 描述:   [IPv6前缀池3           ]    │
│ 启用:   [✓]                        │
│                                     │
│        [ 取消 ]    [ 创建 ]         │
└─────────────────────────────────────┘
```

3. 点击"创建"按钮

### IPv6前缀分配

#### 分配列表

访问"IPv6" → "前缀分配"查看IPv6前缀分配列表：

```
┌─────────────────────────────────────────────────────────────┐
│  IPv6 前缀分配                      [+ 分配前缀]            │
├─────────────────────────────────────────────────────────────┤
│ 客户端   │ 前缀池 │ 分配前缀        │ 长度 │ 状态   │ 操作   │
├─────────────────────────────────────────────────────────────┤
│ client1  │ pool1  │ 2001:db8::/64  │ 64   │ 活跃   │ [管理] │
│ client2  │ pool1  │ 2001:db8:1::/64│ 64   │ 活跃   │ [管理] │
│ client3  │ pool2  │ 2001:db8:2::/64│ 64   │ 活跃   │ [管理] │
└─────────────────────────────────────────────────────────────┘
```

#### 分配前缀

1. 点击"+ 分配前缀"按钮
2. 选择前缀池和客户端：

```
┌─────────────────────────────────────┐
│  分配 IPv6 前缀                     │
├─────────────────────────────────────┤
│ 前缀池: [pool1 ▼              ]    │
│ 客户端: [client4              ]    │
│ 描述:   [客户端4的IPv6前缀    ]    │
│ 启用:   [✓]                        │
│                                     │
│        [ 取消 ]    [ 分配 ]         │
└─────────────────────────────────────┘
```

3. 点击"分配"按钮

## 监控管理

### 监控仪表板

#### 系统监控

访问"监控" → "系统监控"查看系统监控信息：

```
┌─────────────────────────────────────────────────────────────┐
│  系统监控仪表板                                              │
├─────────────────────────────────────────────────────────────┤
│  📊 系统资源使用率                                           │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ CPU: ████████████████████░░░░ 80%                      │ │
│  │ 内存: ████████████████░░░░░░░░ 60%                     │ │
│  │ 磁盘: ██████████░░░░░░░░░░░░░░ 40%                     │ │
│  │ 网络: ████████████████████░░░░ 75%                     │ │
│  └─────────────────────────────────────────────────────────┘ │
│                                                             │
│  📈 历史趋势图                                               │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ CPU使用率趋势 (最近24小时)                              │ │
│  │                                                         │ │
│  │ 100% ┤                                                   │ │
│  │  80% ┤     ████                                         │ │
│  │  60% ┤   ████████                                       │ │
│  │  40% ┤ ████████████                                     │ │
│  │  20% ┤███████████████████████████████████████████████████│ │
│  │   0% └───────────────────────────────────────────────── │ │
│  │     00:00 04:00 08:00 12:00 16:00 20:00 24:00          │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

#### 服务监控

访问"监控" → "服务监控"查看服务监控信息：

```
┌─────────────────────────────────────────────────────────────┐
│  服务监控仪表板                                              │
├─────────────────────────────────────────────────────────────┤
│  🌐 WireGuard 服务状态                                       │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ 服务器: 2个运行中  │  客户端: 15个活跃  │  流量: 1.2GB/天  │ │
│  └─────────────────────────────────────────────────────────┘ │
│                                                             │
│  🛣️ BGP 服务状态                                            │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ 会话: 3个建立  │  路由: 150条  │  宣告: 25条  │  状态: 正常  │ │
│  └─────────────────────────────────────────────────────────┘ │
│                                                             │
│  📊 数据库服务状态                                           │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ 连接池: 10/20  │  查询: 正常  │  响应时间: 5ms  │  状态: 正常 │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 告警管理

#### 告警列表

访问"监控" → "告警管理"查看告警列表：

```
┌─────────────────────────────────────────────────────────────┐
│  告警管理                                                    │
├─────────────────────────────────────────────────────────────┤
│ 时间        │ 级别  │ 名称           │ 状态   │ 描述         │ 操作 │
├─────────────────────────────────────────────────────────────┤
│ 14:30:00   │ 警告  │ CPU使用率过高   │ 活跃   │ CPU使用率85% │ [处理]│
│ 14:25:00   │ 错误  │ 内存使用率过高  │ 已解决  │ 内存使用率90%│ [查看]│
│ 14:20:00   │ 信息  │ 新用户登录     │ 已读   │ 用户admin登录│ [查看]│
└─────────────────────────────────────────────────────────────┘
```

#### 告警规则

访问"监控" → "告警规则"管理告警规则：

```
┌─────────────────────────────────────────────────────────────┐
│  告警规则管理                        [+ 添加规则]           │
├─────────────────────────────────────────────────────────────┤
│ 名称           │ 指标        │ 条件 │ 阈值  │ 级别  │ 状态 │ 操作 │
├─────────────────────────────────────────────────────────────┤
│ CPU使用率过高   │ system.cpu  │ >    │ 80%   │ 警告  │ 启用 │ [管理]│
│ 内存使用率过高  │ system.mem  │ >    │ 85%   │ 错误  │ 启用 │ [管理]│
│ 磁盘使用率过高  │ system.disk │ >    │ 90%   │ 严重  │ 启用 │ [管理]│
└─────────────────────────────────────────────────────────────┘
```

## 日志管理

### 日志查看

#### 日志列表

访问"日志" → "系统日志"查看系统日志：

```
┌─────────────────────────────────────────────────────────────┐
│  系统日志                                                    │
├─────────────────────────────────────────────────────────────┤
│ 时间        │ 级别  │ 模块    │ 消息                    │ 操作 │
├─────────────────────────────────────────────────────────────┤
│ 14:30:00   │ INFO  │ auth    │ 用户admin登录成功        │ [查看]│
│ 14:25:00   │ ERROR │ database│ 数据库连接失败           │ [查看]│
│ 14:20:00   │ WARN  │ wireguard│ WireGuard服务启动失败   │ [查看]│
│ 14:15:00   │ INFO  │ bgp     │ BGP会话session1建立     │ [查看]│
└─────────────────────────────────────────────────────────────┘
```

#### 日志筛选

使用筛选功能查看特定日志：

- **时间范围**: 选择开始和结束时间
- **日志级别**: 选择INFO、WARN、ERROR等
- **模块**: 选择特定模块
- **关键词**: 搜索包含特定关键词的日志

#### 日志详情

点击"查看"按钮查看日志详细信息：

```
┌─────────────────────────────────────────────────────────────┐
│  日志详情                                                    │
├─────────────────────────────────────────────────────────────┤
│ 基本信息:                                                    │
│   时间: 2024-01-01 14:30:00                                 │
│   级别: INFO                                                 │
│   模块: auth                                                 │
│   消息: 用户admin登录成功                                    │
│                                                             │
│ 详细信息:                                                    │
│   用户ID: 1                                                  │
│   用户名: admin                                              │
│   IP地址: 192.168.1.100                                      │
│   用户代理: Mozilla/5.0 (Windows NT 10.0; Win64; x64)...    │
│   会话ID: sess_1234567890                                    │
│                                                             │
│ 上下文信息:                                                  │
│   请求ID: req_1234567890                                     │
│   处理时间: 150ms                                            │
│   响应状态: 200                                              │
└─────────────────────────────────────────────────────────────┘
```

### 日志导出

#### 导出日志

1. 选择要导出的日志
2. 点击"导出"按钮
3. 选择导出格式（JSON、CSV、TXT）
4. 下载导出的文件

## 用户管理

### 用户列表

访问"用户" → "用户管理"查看用户列表：

```
┌─────────────────────────────────────────────────────────────┐
│  用户管理                            [+ 添加用户]           │
├─────────────────────────────────────────────────────────────┤
│ 用户名 │ 邮箱              │ 角色  │ 状态   │ 最后登录    │ 操作 │
├─────────────────────────────────────────────────────────────┤
│ admin  │ admin@example.com │ 管理员│ 活跃   │ 14:30:00   │ [管理]│
│ user1  │ user1@example.com │ 用户  │ 活跃   │ 14:25:00   │ [管理]│
│ user2  │ user2@example.com │ 用户  │ 禁用   │ 13:45:00   │ [管理]│
└─────────────────────────────────────────────────────────────┘
```

### 添加用户

1. 点击"+ 添加用户"按钮
2. 填写用户信息：

```
┌─────────────────────────────────────┐
│  添加用户                            │
├─────────────────────────────────────┤
│ 用户名: [user3                 ]    │
│ 邮箱:   [user3@example.com     ]    │
│ 密码:   [••••••••••••••••••••••]    │
│ 确认密码:[••••••••••••••••••••••]    │
│ 全名:   [User Three            ]    │
│ 角色:   [用户 ▼               ]    │
│ 状态:   [活跃 ▼               ]    │
│                                     │
│        [ 取消 ]    [ 创建 ]         │
└─────────────────────────────────────┘
```

3. 点击"创建"按钮

### 用户操作

每个用户支持以下操作：

- **编辑**: 修改用户信息
- **删除**: 删除用户
- **重置密码**: 重置用户密码
- **启用/禁用**: 启用或禁用用户
- **查看**: 查看用户详情

### 角色权限

#### 角色类型

- **管理员**: 拥有所有权限
- **操作员**: 拥有大部分操作权限
- **用户**: 拥有基本查看权限

#### 权限管理

访问"用户" → "权限管理"管理角色权限：

```
┌─────────────────────────────────────────────────────────────┐
│  权限管理                                                    │
├─────────────────────────────────────────────────────────────┤
│ 角色    │ 权限描述                    │ 状态 │ 操作         │
├─────────────────────────────────────────────────────────────┤
│ 管理员  │ 所有权限                    │ 启用 │ [编辑]       │
│ 操作员  │ WireGuard、BGP、监控管理    │ 启用 │ [编辑]       │
│ 用户    │ 查看权限                    │ 启用 │ [编辑]       │
└─────────────────────────────────────────────────────────────┘
```

## 系统管理

### 系统信息

访问"系统" → "系统信息"查看系统信息：

```
┌─────────────────────────────────────────────────────────────┐
│  系统信息                                                    │
├─────────────────────────────────────────────────────────────┤
│ 系统信息:                                                    │
│   主机名: server1                                            │
│   操作系统: Ubuntu 22.04 LTS                                │
│   内核版本: 5.15.0-91-generic                               │
│   架构: x86_64                                              │
│   运行时间: 2天 5小时 30分钟                                │
│   负载平均: 1.2, 1.5, 1.8                                   │
│                                                             │
│ 应用信息:                                                    │
│   应用名称: IPv6 WireGuard Manager                          │
│   版本: 3.0.0                                               │
│   构建日期: 2024-01-01 10:00:00                             │
│   Python版本: 3.11.2                                        │
│   环境: production                                           │
│                                                             │
│ 数据库信息:                                                  │
│   类型: MySQL                                                │
│   版本: 8.0.35                                              │
│   状态: 已连接                                               │
│   连接池大小: 10                                             │
│   活跃连接: 3                                                │
└─────────────────────────────────────────────────────────────┘
```

### 系统配置

访问"系统" → "系统配置"管理系统配置：

```
┌─────────────────────────────────────────────────────────────┐
│  系统配置                                                    │
├─────────────────────────────────────────────────────────────┤
│ 应用配置:                                                    │
│   应用名称: [IPv6 WireGuard Manager                    ]    │
│   应用版本: [3.0.0                                     ]    │
│   调试模式: [✓]                                            │
│   日志级别: [INFO ▼                                   ]    │
│   最大日志大小: [100MB                                ]    │
│                                                             │
│ 会话配置:                                                    │
│   会话超时: [30分钟                                    ]    │
│   最大会话数: [1000                                    ]    │
│   API速率限制: [1000/分钟                              ]    │
│                                                             │
│ 数据库配置:                                                  │
│   连接池大小: [10                                       ]    │
│   连接超时: [30秒                                       ]    │
│   查询超时: [60秒                                       ]    │
│                                                             │
│        [ 重置 ]    [ 保存 ]                                │
└─────────────────────────────────────────────────────────────┘
```

### 备份管理

访问"系统" → "备份管理"管理备份：

```
┌─────────────────────────────────────────────────────────────┐
│  备份管理                            [+ 创建备份]           │
├─────────────────────────────────────────────────────────────┤
│ 名称           │ 类型 │ 大小    │ 创建时间        │ 状态   │ 操作 │
├─────────────────────────────────────────────────────────────┤
│ daily_backup   │ 完整 │ 100MB   │ 2024-01-01 02:00│ 完成   │ [管理]│
│ weekly_backup  │ 完整 │ 150MB   │ 2024-01-01 03:00│ 完成   │ [管理]│
│ monthly_backup │ 完整 │ 200MB   │ 2024-01-01 04:00│ 完成   │ [管理]│
└─────────────────────────────────────────────────────────────┘
```

#### 创建备份

1. 点击"+ 创建备份"按钮
2. 选择备份类型：

```
┌─────────────────────────────────────┐
│  创建备份                            │
├─────────────────────────────────────┤
│ 备份名称: [manual_backup        ]    │
│ 备份类型: [完整备份 ▼           ]    │
│ 描述:    [手动创建的备份        ]    │
│ 压缩:    [✓]                        │
│ 加密:    [ ]                        │
│                                     │
│        [ 取消 ]    [ 创建 ]         │
└─────────────────────────────────────┘
```

3. 点击"创建"按钮

#### 备份操作

每个备份支持以下操作：

- **下载**: 下载备份文件
- **恢复**: 恢复备份
- **删除**: 删除备份
- **验证**: 验证备份完整性

## 网络管理

### 网络接口

访问"网络" → "接口管理"查看网络接口：

```
┌─────────────────────────────────────────────────────────────┐
│  网络接口管理                                                │
├─────────────────────────────────────────────────────────────┤
│ 接口名 │ 类型  │ IPv4地址      │ IPv6地址        │ 状态   │ 操作 │
├─────────────────────────────────────────────────────────────┤
│ eth0   │ 以太网│ 192.168.1.10  │ 2001:db8::10   │ 活跃   │ [管理]│
│ wg0    │ WireGuard│ 10.0.0.1/24│ 2001:db8::1/64 │ 活跃   │ [管理]│
│ wg1    │ WireGuard│ 10.0.1.1/24│ 2001:db8:1::1/64│ 活跃   │ [管理]│
└─────────────────────────────────────────────────────────────┘
```

### 路由表

访问"网络" → "路由表"查看路由表：

```
┌─────────────────────────────────────────────────────────────┐
│  路由表                                                      │
├─────────────────────────────────────────────────────────────┤
│ 目标网络      │ 网关        │ 接口 │ 类型  │ 优先级 │ 状态 │ 操作 │
├─────────────────────────────────────────────────────────────┤
│ 0.0.0.0/0     │ 192.168.1.1 │ eth0 │ 默认  │ 0      │ 活跃 │ [管理]│
│ 10.0.0.0/24   │ 0.0.0.0     │ wg0  │ 直连  │ 0      │ 活跃 │ [管理]│
│ 10.0.1.0/24   │ 0.0.0.0     │ wg1  │ 直连  │ 0      │ 活跃 │ [管理]│
│ 192.168.1.0/24│ 0.0.0.0     │ eth0 │ 直连  │ 0      │ 活跃 │ [管理]│
└─────────────────────────────────────────────────────────────┘
```

### 网络诊断

访问"网络" → "网络诊断"进行网络诊断：

```
┌─────────────────────────────────────────────────────────────┐
│  网络诊断                                                    │
├─────────────────────────────────────────────────────────────┤
│ 诊断工具:                                                    │
│   [Ping测试] [Traceroute] [DNS查询] [端口扫描] [带宽测试]    │
│                                                             │
│ 目标地址: [8.8.8.8                                    ]    │
│ 测试次数: [4                                          ]    │
│ 数据包大小: [64字节                                   ]    │
│                                                             │
│        [ 开始测试 ]                                        │
│                                                             │
│ 测试结果:                                                    │
│   PING 8.8.8.8 (8.8.8.8) 64 bytes of data.                 │
│   64 bytes from 8.8.8.8: icmp_seq=1 ttl=57 time=15.2 ms    │
│   64 bytes from 8.8.8.8: icmp_seq=2 ttl=57 time=14.8 ms    │
│   64 bytes from 8.8.8.8: icmp_seq=3 ttl=57 time=15.1 ms    │
│   64 bytes from 8.8.8.8: icmp_seq=4 ttl=57 time=14.9 ms    │
│                                                             │
│   --- 8.8.8.8 ping statistics ---                           │
│   4 packets transmitted, 4 received, 0% packet loss        │
│   round-trip min/avg/max/stddev = 14.8/15.0/15.2/0.2 ms    │
└─────────────────────────────────────────────────────────────┘
```

## 故障排除

### 常见问题

#### 1. 无法登录系统

**症状**: 输入正确的用户名和密码后无法登录

**可能原因**:
- 账户被锁定
- 密码过期
- 系统服务异常
- 网络连接问题

**解决方案**:
1. 检查账户状态
2. 重置密码
3. 检查系统服务状态
4. 检查网络连接

#### 2. WireGuard服务无法启动

**症状**: WireGuard服务器显示"启动失败"

**可能原因**:
- 端口被占用
- 配置文件错误
- 权限不足
- 网络接口问题

**解决方案**:
1. 检查端口占用情况
2. 验证配置文件语法
3. 检查文件权限
4. 检查网络接口状态

#### 3. BGP会话无法建立

**症状**: BGP会话状态显示"空闲"或"连接失败"

**可能原因**:
- 邻居地址错误
- AS号配置错误
- 网络连通性问题
- 认证失败

**解决方案**:
1. 验证邻居地址和AS号
2. 检查网络连通性
3. 验证认证配置
4. 查看BGP日志

#### 4. 监控数据不更新

**症状**: 监控仪表板显示数据不更新

**可能原因**:
- 监控服务停止
- 数据库连接问题
- 权限不足
- 配置错误

**解决方案**:
1. 检查监控服务状态
2. 验证数据库连接
3. 检查权限配置
4. 查看监控日志

### 日志分析

#### 查看系统日志

1. 访问"日志" → "系统日志"
2. 使用筛选功能查找相关日志
3. 分析错误信息和时间戳
4. 根据错误信息采取相应措施

#### 常见错误信息

| 错误信息 | 可能原因 | 解决方案 |
|----------|----------|----------|
| "数据库连接失败" | 数据库服务停止 | 启动数据库服务 |
| "权限不足" | 用户权限配置错误 | 检查用户权限 |
| "端口被占用" | 端口冲突 | 更换端口或停止冲突服务 |
| "配置文件错误" | 配置语法错误 | 检查配置文件语法 |

### 性能问题

#### 系统响应慢

**症状**: 页面加载缓慢，操作响应慢

**可能原因**:
- 系统资源不足
- 数据库性能问题
- 网络延迟
- 缓存问题

**解决方案**:
1. 检查系统资源使用情况
2. 优化数据库查询
3. 检查网络连接
4. 清理缓存

#### 内存使用率高

**症状**: 系统内存使用率持续较高

**可能原因**:
- 内存泄漏
- 缓存过大
- 进程异常
- 配置不当

**解决方案**:
1. 检查进程内存使用
2. 调整缓存配置
3. 重启异常进程
4. 优化系统配置

## 常见问题

### Q: 如何修改默认管理员密码？

A: 登录系统后，点击右上角用户头像 → "个人设置" → "安全设置" → 修改密码。

### Q: 如何添加新的WireGuard服务器？

A: 访问"WireGuard" → "服务器管理" → 点击"+ 添加服务器" → 填写配置信息 → 点击"创建"。

### Q: 如何配置BGP会话？

A: 访问"BGP" → "会话管理" → 点击"+ 添加会话" → 填写邻居信息 → 点击"创建"。

### Q: 如何查看系统监控数据？

A: 访问"监控" → "系统监控"查看实时监控数据，或访问"监控" → "告警管理"查看告警信息。

### Q: 如何导出客户端配置？

A: 访问"WireGuard" → "客户端管理" → 选择客户端 → 点击"导出"按钮下载配置文件。

### Q: 如何设置自动备份？

A: 访问"系统" → "备份管理" → 配置备份计划 → 设置备份时间和保留策略。

### Q: 如何查看系统日志？

A: 访问"日志" → "系统日志"查看系统日志，可以使用筛选功能查找特定日志。

### Q: 如何添加新用户？

A: 访问"用户" → "用户管理" → 点击"+ 添加用户" → 填写用户信息 → 点击"创建"。

### Q: 如何配置IPv6前缀池？

A: 访问"IPv6" → "前缀池管理" → 点击"+ 添加前缀池" → 填写前缀信息 → 点击"创建"。

### Q: 如何诊断网络问题？

A: 访问"网络" → "网络诊断"使用内置诊断工具进行网络测试。

---

**IPv6 WireGuard Manager** - 完整的用户手册 🚀

通过本手册，您可以充分利用IPv6 WireGuard Manager的所有功能，高效管理您的网络服务！
